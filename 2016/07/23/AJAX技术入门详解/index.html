<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言：Ajax是当今Web应用程序开发过程中必不可少的一种技术，使用它可以通过异步处理的方式极大的提高用户体验，这篇文章将以简单易懂的方式介绍AJAX技术。  AJAX技术简介AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），音译为“阿贾克斯”，是指一种创建交互式网页应用的网页开发技术。AJAX通过在后台服务器进行少量的数据交换，实">
<meta property="og:type" content="article">
<meta property="og:title" content="AJAX技术入门详解">
<meta property="og:url" content="http://yoursite.com/2016/07/23/AJAX%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="ByteLife">
<meta property="og:description" content="前言：Ajax是当今Web应用程序开发过程中必不可少的一种技术，使用它可以通过异步处理的方式极大的提高用户体验，这篇文章将以简单易懂的方式介绍AJAX技术。  AJAX技术简介AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），音译为“阿贾克斯”，是指一种创建交互式网页应用的网页开发技术。AJAX通过在后台服务器进行少量的数据交换，实">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-21-39.png">
<meta property="og:image" content="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-26-15.png">
<meta property="og:image" content="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-31-34.png">
<meta property="og:image" content="https://cdn.javacodes.cn/files/2016/07/2016-07-22_16-49-19.png">
<meta property="article:published_time" content="2016-07-22T17:46:11.000Z">
<meta property="article:modified_time" content="2020-06-06T20:36:16.497Z">
<meta property="article:author" content="Jeffrey Hu">
<meta property="article:tag" content="AJAX">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-21-39.png">

<link rel="canonical" href="http://yoursite.com/2016/07/23/AJAX%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>AJAX技术入门详解 | ByteLife</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ByteLife</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/huzhanfei" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/23/AJAX%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpeg">
      <meta itemprop="name" content="Jeffrey Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ByteLife">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          AJAX技术入门详解
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2016-07-23 01:46:11" itemprop="dateCreated datePublished" datetime="2016-07-23T01:46:11+08:00">2016-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-07 04:36:16" itemprop="dateModified" datetime="2020-06-07T04:36:16+08:00">2020-06-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JAVA/Web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">Web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>前言：Ajax是当今Web应用程序开发过程中必不可少的一种技术，使用它可以通过异步处理的方式极大的提高用户体验，这篇文章将以简单易懂的方式介绍AJAX技术。</p>
</blockquote>
<h3 id="AJAX技术简介"><a href="#AJAX技术简介" class="headerlink" title="AJAX技术简介"></a>AJAX技术简介</h3><p>AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），音译为“阿贾克斯”，是指一种创建交互式网页应用的网页开发技术。AJAX通过在后台服务器进行少量的数据交换，实现对网页的异步刷新，即可以在不重新加载整个网页的情况下，对网页的局部进行更新。 Ajax 不是一个新的技术，事实上，它是一些旧有的成熟的技术以一种全新的更加强大的方式整合在一起 Ajax的关键技术：</p>
<ul>
<li>使用XHTML(HTML)和CSS构建标准化的展示层</li>
<li>使用DOM进行动态显示和交互</li>
<li>使用XML和XSLT进行数据交换和操纵</li>
<li>使用XMLHttpRequest异步获取数据</li>
<li>使用JavaScript将所有元素绑定在一起</li>
</ul>
<a id="more"></a>

<h3 id="传统Web应用的同步处理方式"><a href="#传统Web应用的同步处理方式" class="headerlink" title="传统Web应用的同步处理方式"></a>传统Web应用的同步处理方式</h3><p>在传统的Web应用中，如果我们需要更新网页内容，必须重新加载整个页面，传统Web应用同步处理方式模型图如下：</p>
<p><img data-src="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-21-39.png" alt="传统web应用模型图"></p>
<p>我们可以看到，在传统的Web应用模型下，客户机 （浏览器或者本地机器上运行的代码）向服务器发出请求。该请求是同步的，客户机等待服务器的响应。当客户机等待的时候，会用某种形式通知您正在处理：</p>
<ul>
<li>沙漏（特别是 Windows 上）</li>
<li>旋转皮球（通常在 Mac 机器上）</li>
<li>应用程序基本上冻结了，然后过一段时间光标变化了</li>
</ul>
<p>这正是传统Web 应用程序让人感到笨拙或缓慢的原因：缺乏真正的交互性。 按下按钮时，应用程序实际上变得不能使用，直到刚刚触发的请求得到响应。如果请求需要大量服务器处理，那么等待的时间可能很长。这对用户体验是非常不友好的。</p>
<h3 id="AJAX应用的异步处理方式"><a href="#AJAX应用的异步处理方式" class="headerlink" title="AJAX应用的异步处理方式"></a>AJAX应用的异步处理方式</h3><p>Ajax应用通过在用户和服务器之间引入一个媒介（Ajax engine）来异步发送请求，消除了传统的发送请求－等待－发送请求－等待的特性，极大的提高了用户体验。 Ajax应用的异步处理方式模型图如下： <img data-src="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-26-15.png" alt="AJAX应用模型图"> 我们在图中可以看到，当用户在浏览器中进行一定的操作（比如点击按钮）请求更新网页内容，浏览器将请求交由AJAX处理，AJAX引擎收到将请求提交给服务器，此时浏览器端无需刷新当前页面，待服务器处理完成请求后，将响应传给AJAX引擎，由AJAX来更新网页的部分内容。 这样的处理在浏览器端用户完全无需等待，完全由AJAX来完成整个处理。这种处理方式就是异步处理。</p>
<h3 id="传统Web应用与Ajax应用的比较"><a href="#传统Web应用与Ajax应用的比较" class="headerlink" title="传统Web应用与Ajax应用的比较"></a>传统Web应用与Ajax应用的比较</h3><p>废话不多说，直接看图： <img data-src="https://cdn.javacodes.cn/files/2016/07/2016-07-22_15-31-34.png" alt="AJAX与传统WEB比较"></p>
<h3 id="创建AJAX核心对象"><a href="#创建AJAX核心对象" class="headerlink" title="创建AJAX核心对象"></a>创建AJAX核心对象</h3><p>想要使用AJAX技术必然逃不掉AJAX引擎，其实说起引擎可能觉得这个概念有点过于庞大，其实在AJAX中，这个引擎不过就是一个对象！对，你没有看错，只是一个对象而已！这个对象就是XMLHttpRequest。 XMLHttpRequest（简称XHR）是一个JavaScript对象。这个对象产生于浏览器中，它是AJAX的核心。 在不同的浏览器中创建这个对象的方法不同，其实主要的原因当然来自万恶的IE，没办法，毕竟IE拥有着庞大的用户群，我们在开发过程中不得不考虑兼容性问题。 那么为了解决兼容性问题，通常创建XHR对象的代码如下：</p>
<p>function ajaxFunction()<br> {<br> var xmlHttp;</p>
<p> try<br>    {<br>   // Firefox, Opera 8.0+, Safari,IE7及以上版本<br>    xmlHttp=new XMLHttpRequest();<br>    }<br> catch (e)<br>    {<br>  // Internet Explorer<br>   try<br>      {<br>      xmlHttp=new ActiveXObject(“Msxml2.XMLHTTP”);//IE较新版本<br>      }<br>   catch (e)<br>      {</p>
<pre><code>  try
     {
     xmlHttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);//IE较老版本
     }
  catch (e)
     {
     alert(&quot;您的浏览器不支持AJAX！&quot;);
     return false;
     }
  }
}</code></pre><p> }</p>
<p>注意不要被这些花括号迷住了眼睛，下面分别介绍每一步: 增加try/catch块：</p>
<ul>
<li>尝试创建 XMLHttpRequest 对象</li>
<li>如果失败,先尝试使用较新版本的Microsoft浏览器创建 Microsoft 兼容的对象（Msxml2.XMLHTTP），如果失败（尝试使用较老版本的Microsoft浏览器创建 Microsoft兼容的对象（Microsoft.XMLHTTP）</li>
</ul>
<p>如果全部失败，则使用JavaScript警告通知用户出现了问题并返回false。</p>
<h3 id="XMLHttpRequest常用方法及属性"><a href="#XMLHttpRequest常用方法及属性" class="headerlink" title="XMLHttpRequest常用方法及属性"></a>XMLHttpRequest常用方法及属性</h3><h4 id="onreadystatechange-属性"><a href="#onreadystatechange-属性" class="headerlink" title="onreadystatechange 属性"></a>onreadystatechange 属性</h4><p>该属性存有处理服务器响应的函数。下面的代码定义了一个空的函数并赋值给onreadystatechange属性：</p>
<p>xmlHttp.onreadystatechange=function()<br>  {<br>  // 我们需要在这里写一些代码<br>  }</p>
<h4 id="readyState属性"><a href="#readyState属性" class="headerlink" title="readyState属性"></a>readyState属性</h4><p>readyState 属性存有服务器响应的状态信息。每当 readyState 改变时，onreadystatechange 函数就会被执行。 这是 readyState 属性可能的值： AJAX - XMLHttpRequest 对象</p>
<p>状态</p>
<p>描述</p>
<p>0</p>
<p>请求未初始化（在调用 open() 之前）</p>
<p>1</p>
<p>请求已提出（调用 send() 之前）</p>
<p>2</p>
<p>请求已发送（这里通常可以从响应得到内容头部）</p>
<p>3</p>
<p>请求处理中（响应中通常有部分数据可用，但是服务器还没有完成响应）</p>
<p>4</p>
<p>请求已完成（可以访问服务器响应并使用它）</p>
<p>我们要向这个 onreadystatechange 函数添加一条 If 语句，来测试我们的响应是否已完成（意味着可获得数据）：</p>
<p>xmlHttp.onreadystatechange=function()<br>  {<br>  if(xmlHttp.readyState==4)<br>    {<br>    // 从服务器的response获得数据<br>    }<br>  }</p>
<h4 id="responseText-属性"><a href="#responseText-属性" class="headerlink" title="responseText 属性"></a>responseText 属性</h4><p>可以通过 responseText 属性来取回由服务器返回的数据。</p>
<p>xmlHttp.onreadystatechange=function()<br>  {<br>  if(xmlHttp.readyState==4)<br>    {<br>    //例如将某一元素内的HTML代码更换为服务器发送的响应字符串<br>    document.getElementById(“某一元素id”).innerHTML = xmlHttp.responseText</code>;<br>    }<br>  }</p>
<h4 id="open-函数"><a href="#open-函数" class="headerlink" title="open()函数"></a>open()函数</h4><p>使用 XMLHttpRequest 对象的 open() 方法来建立请求。该方法有五个参数：</p>
<ul>
<li>request-type：发送请求的类型。典型的值是 GET 或 POST，但也可以发送 HEAD 请求</li>
<li>url：要连接的 URL</li>
<li>asynch：如果希望使用异步连接则为 true，否则为 false。该参数是可选的，默认为 true</li>
<li>username：如果需要身份验证，则可以在此指定用户名。该可选参数没有默认值</li>
<li>password：如果需要身份验证，则可以在此指定口令。该可选参数没有默认值</li>
</ul>
<p>通常使用其中的前三个参数。事实上，即使需要异步连接，通常指定第三个参数为 “true”，这样更容易理解。</p>
<h4 id="send-函数"><a href="#send-函数" class="headerlink" title="send()函数"></a>send()函数</h4><p>一旦请求用 open() 配置好之后，就可以使用send()方法发送请求了，send() 方法只有一个参数，就是要发送的内容。通常在open()方法中已经通过url设置好了参数内容，因此一般send方法中的参数传入null即可。 open()和send()函数的具体使用方法将通过后文中的一个简单实例来进行说明。</p>
<h3 id="实例：通过邮编自动获取城市名称"><a href="#实例：通过邮编自动获取城市名称" class="headerlink" title="实例：通过邮编自动获取城市名称"></a>实例：通过邮编自动获取城市名称</h3><h4 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h4><p>网页内容如下图所示： <img data-src="https://cdn.javacodes.cn/files/2016/07/2016-07-22_16-49-19.png" alt="ajax实例页面展示"> 当用户在邮编文本框中输入邮编时，则城市文本框内容自动改变为对应城市，我们知道，在传统web应用程序中如果要更新网站内容必须重新加载页面，而本实例要求只是更改城市文本框的内容，因此AJAX的异步处理方式最适合本实例的要求。 首先我们先准备一个HTML表单页面，代码如下：</p>
<!DOCTYPE html>
<html>
<head>
<title>AJAX实例-通过邮政编码获取城市名称</title>
<meta charset="UTF-8"/>
<meta name="content-type" content="text/html; charset=UTF-8">
<script type="text/javascript">
</script>
<link rel="alternate" href="/atom.xml" title="ByteLife" type="application/atom+xml">
</head>
<body>
    邮编：
    <input type="text" id="text_zipcode" name="zipcode" />
    <br /> <br />
    城市：
    <input type="text" id="text_city" name="city" />
</body>
</html>

<p>这个页面很简单，body中只有两个input文本框标签。</p>
<h4 id="AJAX代码"><a href="#AJAX代码" class="headerlink" title="AJAX代码"></a>AJAX代码</h4><p>下面我们来编写AJAX代码，通常实现一个AJAX功能需要四个简单的步骤：</p>
<ol>
<li>创建XMLHttpRequest对象；</li>
<li>通过open()函数建立连接；</li>
<li>设置onreadystatechange属性并编写回调（callback）函数；</li>
<li>发送请求send(null)；</li>
</ol>
<p>那么我们按照上面的几个步骤逐步实现： 首先我们需要创建XHR对象，该步骤上文已经详细介绍，在此不在赘述； 然后通过open()函数建立连接：open()函数在上文中我们已经知道其可以传入5个参数，但实际开发中通常只需要传入三个参数即可，分别是：</p>
<ul>
<li>request-type：请求类型。通常有get和post两种，在本例中由于我们只需要传递一个参数，且该参数无需加密，因此我们采用get方式即可，get与post请求方式的区别请自行查阅相关资料；</li>
<li>url：请求链接地址及参数；</li>
<li>asynch：连接方式，分为异步连接和同步连接。当值为true时为异步连接，当false时为同步连接，默认值为true。通常我们使用异步连接方式。</li>
</ul>
<p>那么在本例中，open函数的代码书写如下：</p>
<p>xhr.open(“get”, “zipcode.do?zipcode=”+$(“text_zipcode”).value, true);</p>
<p>在代码中，我们使用get方式建立与zipcode.do建立连接并传递zipcode参数。 接下来我们需要书写回调函数并赋值给onreadystatechanged属性，这个回调函数的意义是当ajax的readyState属性发生改变时所执行的函数，通常在这个函数中我们只关心服务器处理完成ajax的请求后并返回响应时我们需要做的操作，因此我们需要在这个函数中加入一个if判断，判断是否readyState是否为4，代码如下：</p>
<p>xhr.onreadystatechange = function(){<br>    // 判断ajax状态码（4为成功接受服务端响应）<br>    if (xhr.readyState == 4) {<br>        // 判断响应状态码（200即正确响应）<br>        if (xhr.status == 200) {<br>            // 更新页面部分内容<br>            $(“text_city”).value = xhr.responseText;<br>        }<br>    }<br>}</p>
<p>最后我们书写发送请求代码：send(null)； 那么根据上面的步骤，我们已经实现好了ajax的全部代码，整合起来代码如下：</p>
<!DOCTYPE html>
<html>
<head>
<title>AJAX实例-通过邮政编码获取城市名称</title>
<meta charset="UTF-8" />
<meta name="content-type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    window.onload = function() {
        $("text_zipcode").onkeyup = function() {
            // 1、获取XHR对象
            var xhr = createXHR();
            // 判断是否成功获取XHR对象
            if (xhr != false) {
                // 2、建立连接
                xhr.open("get", "zipcode.do?zipcode="+$("text_zipcode").value, true);
                // 3、设置回调函数
                xhr.onreadystatechange = function(){
                    // 判断ajax状态码（4为成功接受服务端响应）
                    if (xhr.readyState == 4) {    
                        // 判断响应状态码（200即正确响应）
                        if (xhr.status == 200) {
                            // 更新页面部分内容
                            $("text_city").value = xhr.responseText;
                        }
                    }
                }
                // 4、发送请求
                xhr.send(null);
            }
        };
    };

<pre><code>function createXHR() {
    var xmlHttp = false;
    try {
        // Firefox, Opera 8.0+, Safari,IE7及以上版本
        xmlHttp = new XMLHttpRequest();
    } catch (e) {
        // Internet Explorer
        try {
            xmlHttp = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);//IE较新版本
        } catch (e) {

            try {
                xmlHttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);//IE较老版本
            } catch (e) {
                alert(&quot;您的浏览器不支持AJAX！&quot;);
                xmlHttp = false;
            }
        }
    }
    return xmlHttp;
}

function $(id) {
    return document.getElementById(id);
};</code></pre><p></script></p>
</head>
<body>
    邮编：
    <input type="text" id="text_zipcode" name="zipcode" />
    <br />    <br /> 
    城市：
    <input type="text" id="text_city" name="city" />
</body>
</html>



<h4 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h4><p>现在我们已经写好整个前端页面并实现ajax，我们来看一下后端代码示例，由于本篇文章主要介绍AJAX，因此后端实现方法不做过多解释，实现语言为Java，代码如下：</p>
<p>package cn.javacodes.servlet;</p>
<p>import java.io.IOException;<br>import java.io.PrintWriter;<br>import java.util.HashMap;<br>import java.util.Map;</p>
<p>import javax.servlet.ServletException;<br>import javax.servlet.http.HttpServlet;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;</p>
<p>public class ZipcodeServlet extends HttpServlet {</p>
<pre><code>private static final long serialVersionUID = 1L;

private Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();

public void init() {
    map.put(&quot;150000&quot;, &quot;哈尔滨&quot;);
    map.put(&quot;110000&quot;, &quot;北京&quot;);
}

public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    response.setContentType(&quot;text/html&quot;);
    response.setCharacterEncoding(&quot;UTF-8&quot;);
    PrintWriter out = response.getWriter();
    String zipcode = request.getParameter(&quot;zipcode&quot;);
    if (map.containsKey(zipcode)) {
        out.println(map.get(zipcode));
    }
    out.flush();
    out.close();

}

public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    doGet(request, response);
}</code></pre><p>}</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Ajax应用的开发确实有些繁琐，实际上，现在有很多成熟稳定的Ajax工具葙（例如JQuery）封装了以上诸多细节，使得Ajax编程更加容易。但是如果不知道应用程序在做什么，就很难发现其中的问题。XMLHttpRequest对象是Ajax应用的核心，必须非常熟悉。 Ajax应用的基本流程：</p>
<ul>
<li>创建XMLHttpRequest对象</li>
<li>从Web表单中获取需要的数据</li>
<li>设置要连接的URL</li>
<li>建立到服务器的连接</li>
<li>设置服务器在完成后要运行的回调函数</li>
<li>发送请求</li>
</ul>
<p>至于如何使用AJAX操作XML、JSON等，我会在以后的文章中在做讨论。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/AJAX/" rel="tag"># AJAX</a>
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2016/07/18/%E5%AE%8C%E7%BE%8E%E9%85%8D%E7%BD%AECentOS+Nginx+MySQL+PHP%EF%BC%88LNMP%EF%BC%89%E7%BD%91%E7%AB%99%E7%8E%AF%E5%A2%83/" rel="prev" title="完美配置CentOS+Nginx+MySQL+PHP（LNMP）网站环境">
      <i class="fa fa-chevron-left"></i> 完美配置CentOS+Nginx+MySQL+PHP（LNMP）网站环境
    </a></div>
      <div class="post-nav-item">
    <a href="/2016/09/06/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BSpring%20HelloWorld/" rel="next" title="Spring学习笔记之Spring HelloWorld">
      Spring学习笔记之Spring HelloWorld <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#AJAX技术简介"><span class="nav-number">1.</span> <span class="nav-text">AJAX技术简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#传统Web应用的同步处理方式"><span class="nav-number">2.</span> <span class="nav-text">传统Web应用的同步处理方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AJAX应用的异步处理方式"><span class="nav-number">3.</span> <span class="nav-text">AJAX应用的异步处理方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#传统Web应用与Ajax应用的比较"><span class="nav-number">4.</span> <span class="nav-text">传统Web应用与Ajax应用的比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建AJAX核心对象"><span class="nav-number">5.</span> <span class="nav-text">创建AJAX核心对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XMLHttpRequest常用方法及属性"><span class="nav-number">6.</span> <span class="nav-text">XMLHttpRequest常用方法及属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#onreadystatechange-属性"><span class="nav-number">6.1.</span> <span class="nav-text">onreadystatechange 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#readyState属性"><span class="nav-number">6.2.</span> <span class="nav-text">readyState属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#responseText-属性"><span class="nav-number">6.3.</span> <span class="nav-text">responseText 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#open-函数"><span class="nav-number">6.4.</span> <span class="nav-text">open()函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#send-函数"><span class="nav-number">6.5.</span> <span class="nav-text">send()函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例：通过邮编自动获取城市名称"><span class="nav-number">7.</span> <span class="nav-text">实例：通过邮编自动获取城市名称</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#前端页面"><span class="nav-number">7.1.</span> <span class="nav-text">前端页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AJAX代码"><span class="nav-number">7.2.</span> <span class="nav-text">AJAX代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#后端代码"><span class="nav-number">7.3.</span> <span class="nav-text">后端代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">8.</span> <span class="nav-text">总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jeffrey Hu"
      src="/uploads/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Jeffrey Hu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">85</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/huzhanfei" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;huzhanfei" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeffrey Hu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
